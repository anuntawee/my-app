name: Get Tags from GitHub API

on:
  workflow_dispatch:

jobs:
  get_tags:
    runs-on: ubuntu-latest

    steps:
    - name: Check out code
      uses: actions/checkout@v2

    - name: Set up Python
      uses: actions/setup-python@v2
      with:
        python-version: 3.x

    - name: Install dependencies
      run: |
        python -m pip install --upgrade pip
        pip install requests

    - name: Get Tags from GitHub API
      id: get_tags
      run: |
        REPO_OWNER=anuntawee
        REPO_NAME=my-app
        TAGS=$(curl -s -H "Authorization: token $PAT" "https://api.github.com/repos/$REPO_OWNER/$REPO_NAME/tags" | jq -r '.[].name')
        echo "::set-output name=tags::$TAGS"

    - name: Display Tags
      run: |
        TAGS=${{ steps.get_tags.outputs.tags }}
        echo "Tags from GitHub API: $TAGS"
